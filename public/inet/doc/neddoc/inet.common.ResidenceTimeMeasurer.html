<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="OMNeT++ NED doc generator"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
<link rel="stylesheet" href="material-icons.css">
<link rel="stylesheet" href="material.blue-light_blue.min.css">
<link rel="stylesheet" href="style.css" type="text/css" />

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<title>ResidenceTimeMeasurer</title>
</head>
<body>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
  <header class="mdl-layout__header">
    <div id="top" class="mdl-layout__header-row">
      <span class="mdl-layout-title">ResidenceTimeMeasurer</span>
      <div class="mdl-layout-spacer"></div>
<!--
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
        <label class="mdl-button mdl-js-button mdl-button--icon" for="search">
          <i class="material-icons">search</i>
        </label>
        <div class="mdl-textfield__expandable-holder">
          <input class="mdl-textfield__input" type="text" id="search" />
          <label class="mdl-textfield__label" for="search">Enter your query...</label>
        </div>
      </div>
      <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons">code</i>
      </button>
      <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
        <i class="material-icons">more_vert</i>
      </button>
      <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
        <li class="mdl-menu__item">OMNeT++ Website</li>
      </ul>
-->
    </div>
  </header>

  <div class="drawer mdl-layout__drawer">
    <nav id="side-nav" class="mdl-navigation">
      <div id="nav-tree">
        <div id="nav-tree-contents">
          <div id="nav-sync" class="sync"></div>
        </div>
      </div>
    </nav>
  </div>
  <script type="text/javascript">
  $(document).ready(function(){initNavTree(location.pathname.split("/").slice(-1).toString(),'');});
  </script>

  <main class="mdl-layout__content">
    <div id="doc-content">

    <p>Package: <a class="reference-ned" href="packages.html#inet_common">inet.common</a></p>
<h2 class="comptitle" style="float: left;">ResidenceTimeMeasurer</h2>
<span class="mdl-chip" style="float: right; margin-top: 6pt; background-color: #ff000040;">
    <span class="mdl-chip__text">simple module</span>
</span><div style="clear: both;"/>

<p>This module measures the residence time of packet data in network nodes. The
measurement is done by tracking every bit individually using their unique
identity. For each bit the measurement starts when the incoming enclosing
packet reception ends (or starts) in the network node. Similarly, for each
bit the measurement ends when the outgoing enclosing packet transmission
starts (or ends) in the network node.</p>
<img src="inet.common.ResidenceTimeMeasurer-type.svg" ismap="yes" usemap="#type-diagram"/><map name="type-diagram">
<area shape="rect" href="inet.common.ResidenceTimeMeasurer.html" title="ResidenceTimeMeasurer" alt="ResidenceTimeMeasurer" coords="0,42,273,82">
</map>
<h3 class="subtitle">Inheritance diagram</h3>
<p>The following diagram shows inheritance relationships for this type.
Unresolved types are missing from the diagram.</p>
<object type="image/svg+xml" data="inet.common.ResidenceTimeMeasurer-inheritance.svg"></object>
<h3 class="subtitle">Parameters</h3>
<table class="paramstable">
   <tr>
      <th class="name">Name</th>
      <th class="type">Type</th>
      <th class="defaultvalue">Default value</th>
      <th class="description">Description</th>
   </tr>
   <tr class="local">
      <td>subscriptionModule</td>
      <td>string</td>
      <td>"^"</td>
      <td>
<p>relative module path where subscription happens</p>
</td>
   </tr>
   <tr class="local">
      <td>measurementStartSignal</td>
      <td>string</td>
      <td>"receptionEnded"</td>
      <td>
<p>subscribed signal for measurement start</p>
</td>
   </tr>
   <tr class="local">
      <td>measurementEndSignal</td>
      <td>string</td>
      <td>"transmissionStarted"</td>
      <td>
<p>subscribed signal for measurement end</p>
</td>
   </tr>
</table>
<h3 class="subtitle">Properties</h3>
<table class="propertiestable">
   <tr>
      <th class="name">Name</th>
      <th class="value">Value</th>
      <th class="description">Description</th>
   </tr>
   <tr>
      <td>display</td>
      <td>i=block/timer</td>
      <td></td>
   </tr>
</table>
<h3 class="subtitle">Signals</h3>
<table class="signalstable">
   <tr>
      <th class="name">Name</th>
      <th class="type">Type</th>
      <th class="unit">Unit</th>
   </tr>
   <tr class="local">
      <td>packetStayed</td>
      <td>inet::Packet</td>
      <td></td>
   </tr>
</table>
<h3 class="subtitle">Statistics</h3>
<table class="statisticstable">
   <tr>
      <th class="name">Name</th>
      <th class="title">Title</th>
      <th class="source">Source</th>
      <th class="record">Record</th>
      <th class="unit">Unit</th>
      <th class="interpolationmode">Interpolation Mode</th>
   </tr>
   <tr class="local">
      <td>flowBitResidenceTimePerRegion</td>
      <td>flow bit residence time per region</td>
      <td>dropWeight(lengthWeightedValuePerRegion(residenceTimePerRegion(demuxFlow(packetStayed))))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>bitResidenceTimePerRegion</td>
      <td>bit residence time per region</td>
      <td>dropWeight(lengthWeightedValuePerRegion(residenceTimePerRegion(packetStayed)))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>bitResidenceTime</td>
      <td>bit residence time</td>
      <td>weightTimes(lengthWeightedValuePerRegion(residenceTimePerRegion(packetStayed)))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>flowMaxBitResidenceTimePerPacket</td>
      <td>flow maximum bit residence time per packet</td>
      <td>maxPerGroup(groupRegionsPerPacket(residenceTimePerRegion(demuxFlow(packetStayed))))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>flowBitResidenceTime</td>
      <td>flow bit residence time</td>
      <td>weightTimes(lengthWeightedValuePerRegion(residenceTimePerRegion(demuxFlow(packetStayed))))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>maxBitResidenceTimePerPacket</td>
      <td>maximum bit residence time per packet</td>
      <td>maxPerGroup(groupRegionsPerPacket(residenceTimePerRegion(packetStayed)))</td>
      <td>vector?, histogram?</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>meanBitResidenceTimePerPacket</td>
      <td>mean bit residence time per packet</td>
      <td>weightedMeanPerGroup(groupRegionsPerPacket(residenceTimePerRegion(packetStayed)))</td>
      <td>vector, histogram</td>
      <td>s</td>
      <td>none</td>
   </tr>
   <tr class="local">
      <td>flowMeanBitResidenceTimePerPacket</td>
      <td>flow mean bit residence time per packet</td>
      <td>weightedMeanPerGroup(groupRegionsPerPacket(residenceTimePerRegion(demuxFlow(packetStayed))))</td>
      <td>vector, histogram</td>
      <td>s</td>
      <td>none</td>
   </tr>
</table>
<h3 class="subtitle">Source code</h3>
<pre class="src">
<span style="color: #808080; font-style: italic; ">//
// This module measures the residence time of packet data in network nodes. The
// measurement is done by tracking every bit individually using their unique
// identity. For each bit the measurement starts when the incoming enclosing
// packet reception ends (or starts) in the network node. Similarly, for each
// bit the measurement ends when the outgoing enclosing packet transmission
// starts (or ends) in the network node.
//
</span><span style="color: #800000; font-weight: bold; ">simple</span><span style="color: #232629; "> </span><span style="color: #232629; ">ResidenceTimeMeasurer</span><span style="color: #232629; "> </span><span style="color: #800000; font-weight: bold; ">like</span><span style="color: #232629; "> </span><span style="color: #232629; ">IMeasurer</span><span style="color: #232629; ">
{
    </span><span style="color: #800000; font-weight: bold; ">parameters</span><span style="color: #232629; ">:
        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #232629; "> </span><span style="color: #232629; ">subscriptionModule</span><span style="color: #232629; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #232629; ">(</span><span style="color: #008000; ">&quot;^&quot;</span><span style="color: #232629; ">); </span><span style="color: #808080; font-style: italic; ">// relative module path where subscription happens
</span><span style="color: #232629; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #232629; "> </span><span style="color: #232629; ">measurementStartSignal</span><span style="color: #232629; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #232629; ">(</span><span style="color: #008000; ">&quot;receptionEnded&quot;</span><span style="color: #232629; ">); </span><span style="color: #808080; font-style: italic; ">// subscribed signal for measurement start
</span><span style="color: #232629; ">        </span><span style="color: #000080; font-weight: bold; ">string</span><span style="color: #232629; "> </span><span style="color: #232629; ">measurementEndSignal</span><span style="color: #232629; "> = </span><span style="color: #800000; font-weight: bold; ">default</span><span style="color: #232629; ">(</span><span style="color: #008000; ">&quot;transmissionStarted&quot;</span><span style="color: #232629; ">); </span><span style="color: #808080; font-style: italic; ">// subscribed signal for measurement end
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@display</span><span style="color: #232629; ">(</span><span style="color: #008000; ">&quot;i=block/timer&quot;</span><span style="color: #232629; ">);
        </span><span style="color: #232629; font-weight: bold; ">@signal</span><span style="color: #232629; ">[</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">](</span><span style="color: #232629; ">type</span><span style="color: #232629; ">=</span><span style="color: #232629; ">inet</span><span style="color: #232629; ">::</span><span style="color: #232629; ">Packet</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the maximum residence time for any bit in the outgoing packet
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">maxBitResidenceTimePerPacket</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;maximum bit residence time per packet&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">maxPerGroup</span><span style="color: #232629; ">(</span><span style="color: #232629; ">groupRegionsPerPacket</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the mean residence time for all bits in the outgoing packet
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">meanBitResidenceTimePerPacket</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;mean bit residence time per packet&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">weightedMeanPerGroup</span><span style="color: #232629; ">(</span><span style="color: #232629; ">groupRegionsPerPacket</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value (the same for all bits in the region) is the residence time of any bit in the region
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">bitResidenceTimePerRegion</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;bit residence time per region&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">dropWeight</span><span style="color: #232629; ">(</span><span style="color: #232629; ">lengthWeightedValuePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the residence time for individual bits
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">bitResidenceTime</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;bit residence time&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">weightTimes</span><span style="color: #232629; ">(</span><span style="color: #232629; ">lengthWeightedValuePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the flow specific maximum residence time for any bit in the outgoing packet
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">flowMaxBitResidenceTimePerPacket</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;flow maximum bit residence time per packet&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">maxPerGroup</span><span style="color: #232629; ">(</span><span style="color: #232629; ">groupRegionsPerPacket</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">demuxFlow</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">)))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the flow specific mean residence time for all bits in the outgoing packet
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">flowMeanBitResidenceTimePerPacket</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;flow mean bit residence time per packet&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">weightedMeanPerGroup</span><span style="color: #232629; ">(</span><span style="color: #232629; ">groupRegionsPerPacket</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">demuxFlow</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">)))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value (the same for all bits in the region) is the flow specific residence time of any bit in the region
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">flowBitResidenceTimePerRegion</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;flow bit residence time per region&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">dropWeight</span><span style="color: #232629; ">(</span><span style="color: #232629; ">lengthWeightedValuePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">demuxFlow</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">)))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
        </span><span style="color: #808080; font-style: italic; ">// the statistics value is the flow specific residence time for individual bits
</span><span style="color: #232629; ">        </span><span style="color: #232629; font-weight: bold; ">@statistic</span><span style="color: #232629; ">[</span><span style="color: #232629; ">flowBitResidenceTime</span><span style="color: #232629; ">](</span><span style="color: #232629; ">title</span><span style="color: #232629; ">=</span><span style="color: #008000; ">&quot;flow bit residence time&quot;</span><span style="color: #232629; ">; </span><span style="color: #232629; ">source</span><span style="color: #232629; ">=</span><span style="color: #232629; ">weightTimes</span><span style="color: #232629; ">(</span><span style="color: #232629; ">lengthWeightedValuePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">residenceTimePerRegion</span><span style="color: #232629; ">(</span><span style="color: #232629; ">demuxFlow</span><span style="color: #232629; ">(</span><span style="color: #232629; ">packetStayed</span><span style="color: #232629; ">)))); </span><span style="color: #232629; ">record</span><span style="color: #232629; ">=</span><span style="color: #232629; ">vector</span><span style="color: #232629; ">?,</span><span style="color: #232629; ">histogram</span><span style="color: #232629; ">?; </span><span style="color: #232629; ">unit</span><span style="color: #232629; ">=</span><span style="color: #232629; ">s</span><span style="color: #232629; ">; </span><span style="color: #232629; ">interpolationmode</span><span style="color: #232629; ">=</span><span style="color: #232629; ">none</span><span style="color: #232629; ">);
}
</span></pre>
File: <a href="src-inet-common-ResidenceTimeMeasurer.ned.html">src/inet/common/ResidenceTimeMeasurer.ned</a>
<hr><p class="footer"><a href="http://creativecommons.org/licenses/by-sa/3.0" target="_top"><img src="by-sa.svg"></a> This documentation is released under the <a href="http://creativecommons.org/licenses/by-sa/3.0" target="_top">Creative Commons license</a></p>


    </div><!-- doc-content -->
  </main>
</div>

<script type="text/javascript" src="material.min.js"></script>
</body>
</html>
